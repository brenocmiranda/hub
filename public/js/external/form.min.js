jQuery(function(e){let t=[],n={validations:{isEmail:function(e){return/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(e)},isPhone:function(e){return/^(\()?\d{2}(\))?\s?\d{4,5}(\-|\.)?\d{4}$/i.test(e)},setDisabled:function(t,n){e(t).find("input, select, textarea, button").each(function(){e(this).prop("disabled",n),e(this).attr("disabled",n)})}},masks:{phone:function(e){var t=e.replace(/\D/g,"");return(t=t.replace(/^0/,"")).length>10?t.replace(/^(\d\d)(\d{5})(\d{4}).*/,"($1) $2-$3"):t.length>5?t.replace(/^(\d\d)(\d{4})(\d{0,4}).*/,"($1) $2-$3"):t.length>2?t.replace(/^(\d\d)(\d{0,5})/,"($1) $2"):t.replace(/^(\d*)/,"($1")},removeNonLetters:function(e){return e.replace(/[^a-zA-Z]/g,"")},removeSpaces:function(e){if(32==e.which)return!1}},hub:{integration:function(t){return new Promise((n,a)=>{e.ajax({url:"https://hub.komuh.com/api/leads/lps",type:"POST",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer 4|GAoYty9d37SKV2EMUhRWG2jKQ3erJFjqP5vWkd6u2d82e33a")},data:t,success:function(e){n(e)},error:function(e,t,n){a(console.log(e))}})})}},loading:{script:function(e,t={},n=null){let a=document,o=a.createElement("script");for(let r in o.type="text/javascript",t)o[r]=t[r];return o.src=e,n&&(o.onload=n),a.getElementsByTagName("body")[0].appendChild(o)},isInViewport:function(t){let n=t,a=n.offset().top,o=a+n.outerHeight(),r=e(window),s=r.height(),l=r.scrollTop();return o>l&&a<l+s},checkInView:function(){e("section, .inview").each(function(){n.loading.isInViewport(e(this))&&e(this).addClass("is-inview")})},patrimar:function(){e(".loading").fadeOut()},initGTMOnEvent:function(e){n.loading.initGTM(),e.currentTarget.removeEventListener(e.type,n.loading.initGTMOnEvent)},initGTM:function(){if(window.gtmDidInit)return!1;window.gtmDidInit=!0,e.getScript("https://www.googletagmanager.com/gtm.js?id="+window.ID_GTM,function(){dataLayer.push({event:"gtm.js","gtm.start":new Date().getTime(),"gtm.uniqueEventId":0})})},chatPatrimar:function(){var t=window.location.toString().split("?");if(t.length>1){var n=t[1].split("&");for(i in n){var a=n[i].split("=");null===sessionStorage.getItem(a[0])&&sessionStorage.setItem(a[0],decodeURIComponent(a[1]))}}var o=sessionStorage.getItem("utm_source")||"",r=sessionStorage.getItem("utm_campaign")||"",s=sessionStorage.getItem("utm_medium")||"";e.getScript("https://www.patrimar.com.br/hotsites/integracoes/chat.php?empreendimento="+window.building+"&url="+window.location.pathname+"&utm_source="+o+"&campanha="+r+"&midia="+s,function(){XRM_Chat.open()})},recaptcha:function(t){let n=this,a=e(this).parents("form"),o=a.find(".submit-btn");t||e.getScript("//www.google.com/recaptcha/api.js",function(){t=!0,a.find("input").each((t,n)=>e(n).off(".rcp")),setTimeout(()=>{e(".submit-btn").prop("disabled",!0),"pp"===n.name&&n.checked&&o.removeProp("disabled")},100)})},initColorboxVideo:function(){e('a[href*="vimeo.com"]').on("click",function(e){e.preventDefault();let t=/vimeo.*\/(\d+)/i.exec(this.href);t&&showColorboxVideo({href:"//player.vimeo.com/video/"+t[1]+"?autoplay=1",innerHeight:402})}),e('a[href*="youtube.com"]').on("click",function(e){e.preventDefault();let t=this.href.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);t&&11==t[7].length&&showColorboxVideo({href:"//www.youtube.com/embed/"+t[7]+"?autoplay=1"})})},showColorboxVideo:function(t){let n=e.extend({iframe:!0,innerWidth:960,innerHeight:540,maxWidth:"90%",maxHeight:"90%",fixed:!0},t);e.colorbox(n)},onetrust:function(){let t="https://cdn.cookielaw.org/consent/"+window.oneTrust+"/OtAutoBlock.js";e.getScript(t,function(){var e=document.createElement("script");e.type="text/javascript",e.setAttribute("data-domain-script",window.oneTrust),e.async=!0,e.src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js";var t=document.getElementsByTagName("body")[0].appendChild(e,t);function n(){}})},initGallery:function(a){e.getJSON(a,function(a){t=a;let o=e("#gallery-nav"),r=[];e.each(a.galerias,function(e,t){r.push(`<a href="#" class="btn" data-gallery="${t.slug}">${t.name}</a>`)}),o.prepend(r.join("\n")),o.find("a:first-child").addClass("active"),n.loading.renderGallery(a.galerias[0].slug)}),e(document).on("click","[data-gallery]",function(t){t.preventDefault(),n.loading.renderGallery(e(this).data("gallery")),e("#gallery-nav").find("a.active").removeClass("active"),e(this).addClass("active")})},renderGallery:function(n){let a=t.galerias.find(e=>e.slug===n);if(!a)return;let o=a.images;if(!o.length)return;let r=e("#gallery-full"),s=t.path+a.slug+"/";r.hasClass("slick-initialized")&&r.slick("unslick"),r.html(""),$render=[],o.map(function(e){let t=`<a href="${s+"1920/"+e.src}" class="slide-item" title="${e.alt}"> <picture> <source srcset="${s+"320/"+e.src}" media="(max-width: 320px)" /> <source srcset="${s+"640/"+e.src}" media="(max-width: 640px)" /> <source srcset="${s+"960/"+e.src}" media="(max-width: 1200px)" /> <img src="${s+"1280/"+e.src}" alt="${e.alt}" loading="lazy" width="1280" height="720" /> </picture> <p>${e.alt}</p> </a>`;$render.push(t)}),r.append($render.join("\n")),r.slick({slidesToShow:1,slidesToScroll:1,arrows:!0,lazyLoad:"ondemand"}),e('a[href$=".jpg"], a[href$=".png"], a[href$=".gif"], a[href$=".webp"]').colorbox({maxWidth:"90%",maxHeight:"90%",fixed:!0,rel:"slide"})}}};window.formSubmit=function(t){setTimeout(function(){e("form.sending-form").find(".submit-btn").prop("disabled",!0)},10)},e(".is-phone").on("keyup",function(e){var t=n.masks.phone(this.value);t!=this.value&&(this.value=t)}),e(".is-text").on("keyup",function(e){var t=n.masks.removeNonLetters(this.value);t!=this.value&&(this.value=t)}),e(".no-space").on("keypress",function(e){n.masks.removeSpaces()}),e('[name="pp"]').on("change",function(){e(this).parents("form").find(".submit-btn").prop("disabled",!this.checked)}),window.dataLayer=window.dataLayer||[],e(".submit-btn").prop("disabled",!0).on("click",function(t){t.preventDefault();let a=e(this),o=a.parents("form"),r=o.find(".form-output"),s=o.find('[name="nome"]').val().trim(),l=o.find('[name="email"]').val().trim(),d=o.find('[name="telefone"]').val().trim(),u=o.find('[name="empreendimento"]').val().trim(),c=o.find('[name="sobrenome"]').length>0?o.find('[name="sobrenome"]').val().trim():"",m=o.find('[name="messagem"]').length>0?o.find('[name="messagem"]').val().trim():"",f=o.find('[name="origin"]').length>0?o.find('[name="origin"]').val().trim():"",$=o.find('[name="com"]').length>0?o.find('[name="com"]').val().trim():"",p=o.find('[name="pp"]'),h=location.search?location.search.replace("?",""):"",g=location.href;if(!p.is(":checked")){alert("Aceite da Pol\xedtica de Privacidade \xe9 obrigat\xf3rio.");return}if(""==s||""==l||""==d||""==u){alert("Preencha todos os campos.");return}if(!n.validations.isEmail(l)){alert("O e-mail fornecido n\xe3o parece v\xe1lido.");return}if(!n.validations.isPhone(d)){alert("O telefone fornecido n\xe3o parece v\xe1lido.");return}r.length||(o.prepend('<div class="form-output"></div>'),r=o.find(".form-output")),r.html("").removeClass("is-error is-success"),a.addClass("sending"),o.addClass("sending-form"),n.validations.setDisabled(o,!0);let F={nome:s,sobrenome:c,email:l,telefone:d,mensagem:m,empreendimento:u,url_params:h,url:g,origin:f,com:$};console.log("form data",F),n.hub.integration(F).then(function(t){console.log("sendmail",t),t.status&&(a.removeClass("sending"),o[0].reset(),dataLayer.push({event:"conversao_sucesso"}),e(document).trigger("form-sended",[o])),n.validations.setDisabled(o,!1),e("form.sending-form .submit-btn").attr("disabled",!0),o.removeClass("sending-form"),r.html(`<p>${t.status?"Dados enviados com sucesso.":"Erro ao enviar seus dados. Verifique e tente novamente."}</p>`).addClass(t.status?"is-success":"is-error")})}),window.dataLayer=window.dataLayer||[],e(".submit-btn").prop("disabled",!0).on("click",function(t){t.preventDefault();let a=e(this),o=a.parents("form"),r=o.find(".form-output"),s=o.find('[name="nome"]').val().trim(),l=o.find('[name="email"]').val().trim(),d=o.find('[name="telefone"]').val().trim(),u=o.find('[name="empreendimento"]').val().trim(),c=o.find('[name="sobrenome"]').length>0?o.find('[name="sobrenome"]').val().trim():"",m=o.find('[name="messagem"]').length>0?o.find('[name="messagem"]').val().trim():"",f=o.find('[name="origin"]').length>0?o.find('[name="origin"]').val().trim():"",$=o.find('[name="com"]').length>0?o.find('[name="com"]').val().trim():"",p=o.find('[name="pp"]'),h=location.search?location.search.replace("?",""):"",g=location.href;if(!p.is(":checked")){alert("Aceite da Pol\xedtica de Privacidade \xe9 obrigat\xf3rio.");return}if(""==s||""==l||""==d||""==u){alert("Preencha todos os campos.");return}if(!n.validations.isEmail(l)){alert("O e-mail fornecido n\xe3o parece v\xe1lido.");return}if(!n.validations.isPhone(d)){alert("O telefone fornecido n\xe3o parece v\xe1lido.");return}r.length||(o.prepend('<div class="form-output"></div>'),r=o.find(".form-output")),r.html("").removeClass("is-error is-success"),a.addClass("sending"),o.addClass("sending-form"),n.validations.setDisabled(o,!0);let F={nome:s,sobrenome:c,email:l,telefone:d,mensagem:m,empreendimento:u,url_params:h,url:g,origin:f,com:$};console.log("form data",F),n.hub.integration(F).then(function(t){console.log("sendmail",t),t.status&&(a.removeClass("sending"),o[0].reset(),dataLayer.push({event:"conversao_sucesso"}),e(document).trigger("form-sended",[o])),n.validations.setDisabled(o,!1),e("form.sending-form .submit-btn").attr("disabled",!0),o.removeClass("sending-form"),r.html(`<p>${t.status?"Dados enviados com sucesso.":"Erro ao enviar seus dados. Verifique e tente novamente."}</p>`).addClass(t.status?"is-success":"is-error")})}),n.loading.checkInView(),e(window).on("resize scroll",n.loading.checkInView),e(".loading").length&&setTimeout(()=>{n.loading.patrimar()},3500),window.ID_GTM&&(document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{n.loading.initGTM()},3500)}),e(document).on("scroll mousemove touchstart click",n.loading.initGTMOnEvent)),window.building&&e(".chat").length&&e(".chat").on("click",function(){n.loading.chatPatrimar()}),e("input").on("focus.rcp",function(){n.loading.recaptcha(!1)}),window.useColorboxVideo&&setTimeout(()=>{e().colorbox?n.loading.initColorboxVideo():n.loading.script("https://hub.komuh.com/js/external/colorbox.min.js",{async:!0,defer:!0},function(){console.log("Colorbox loaded"),n.loading.initColorboxVideo()})},3500),window.oneTrust&&setTimeout(()=>{n.loading.onetrust()},3500),window.galleryJson&&setTimeout(()=>{!e().slick&&e().colorbox?n.loading.script("https://hub.komuh.com/js/external/slick.min.js",{async:!0,defer:!0},function(){console.log("Slick loaded"),n.loading.script("colorbox.min.js",{async:!0,defer:!0},function(){console.log("Colorbox loaded"),n.loading.initGallery(window.galleryJson)})}):e().slick?e().colorbox?n.loading.initGallery():n.loading.script("https://hub.komuh.com/js/external/colorbox.min.js",{async:!0,defer:!0},function(){console.log("Colorbox loaded"),n.loading.initGallery(window.galleryJson)}):n.loading.script("https://hub.komuh.com/js/external/slick.min.js",{async:!0,defer:!0},function(){console.log("Slick loaded"),n.loading.initGallery(window.galleryJson)})},3500)});